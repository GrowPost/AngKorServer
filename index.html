 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="AngkorPS Growtopia Private Server Dashboard">
<title>AngkorPS</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Favicon -->
<link rel="icon" href="assets/AngkorPS.png" type="image/png">

<style>
/* RESET */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Inter', sans-serif; background: #0d1117; color: #e5e5e5; scroll-behavior: smooth; }

/* HEADER */
.header { display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem; background:#11151c; border-bottom:1px solid #1f242c; position:sticky; top:0; z-index:1000; }
.header .logo { display:flex; align-items:center; gap:.5rem; cursor:pointer; }
.header .logo img { width:40px; height:40px; border-radius:8px; object-fit:cover; }
.header .logo span { font-size:1.5rem; font-weight:700; color:#10b981; }
.nav { position:relative; }
.nav button { background:none; border:none; color:#e5e5e5; font-size:1rem; cursor:pointer; display:flex; align-items:center; gap:.3rem; font-weight:500; }
.nav-menu { position:absolute; top:calc(100% + 5px); right:0; background:#161b23; border:1px solid #1f242c; border-radius:8px; flex-direction:column; min-width:180px;
  overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.3);
  opacity:0; transform:translateY(-20px) scaleY(0.95); pointer-events:none;
  transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}
.nav-menu.show { opacity:1; transform:translateY(0) scaleY(1); pointer-events:auto; }
.nav-menu a { padding:.8rem 1rem; color:#e5e5e5; text-decoration:none; display:block; transition: all 0.2s; }
.nav-menu a:hover { background:#10b981; color:#111; }

/* CONTAINER */
.container { max-width: 900px; margin: auto; padding: 2rem 1rem; }

/* CARD BASE */
.card { background:#11151c; padding:1.5rem; border-radius:12px; border:1px solid #1f242c; margin-bottom:1.4rem; box-shadow:0 2px 8px rgba(0,0,0,0.2); transition: all 0.3s ease; }

/* STATUS CARD */
.status-card { display:flex; justify-content:space-between; align-items:center; margin-bottom:.8rem; padding:.8rem 1rem; border-radius:10px; background:#161b23; }
.status-card h4 { font-weight:500; font-size:1rem; color:#b5b5b5; }
.status-card p { font-weight:600; font-size:1.2rem; color:#10b981; }

/* LEADERBOARD */
.leaderboard { margin-bottom:1.5rem; }
.leaderboard h3 { font-size:1.1rem; font-weight:600; color:#fff; margin-bottom:.8rem; display:flex; align-items:center; gap:.5rem; }
.leaderboard ul { list-style:none; padding:0; margin:0; }

/* LEADERBOARD ITEM */
.lb-item {
  display:flex; justify-content:space-between; align-items:center; padding:.6rem 1rem; margin-bottom:.4rem;
  background:#161b23; border-radius:8px; font-weight:500; color:#e5e5e5;
}
.lb-wl { display:flex; align-items:center; gap:.35rem; }
.lb-wl img { width:18px; height:18px; object-fit:contain; }

/* BUTTON GRID */
.btn-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(150px, 1fr)); gap:.8rem; }
.btn { padding:.8rem; border-radius:10px; font-weight:500; font-size:.9rem; border:1px solid #222831; background:#1a1f26; color:#e5e5e5; cursor:pointer; transition:.2s; }
.btn:hover { background:#10b981; color:#111; border-color:#10b981; }
.btn-discord { background:#5865f2; border:none; color:#fff; }
.btn-discord:hover { opacity:.85; }

/* CARD HEADINGS SPACING FIX */
.card h3 { margin-bottom: 1.2rem; }

/* FOOTER */
.footer { text-align:center; padding:2rem 0; color:#888; font-size:0.9rem; }

/* TOAST */
.toast { position:fixed; bottom:30px; left:50%; transform:translateX(-50%) translateY(40px); background:#10b981; color:#fff; padding:.8rem 1.4rem; border-radius:10px; opacity:0; transition:.4s ease; pointer-events:none; font-size:.9rem; }
.toast.show { opacity:1; transform:translateX(-50%) translateY(0px); }
.toast.error { background:#d9534f; }

/* ONLINE CHART */
#onlineChart { width:100%; background:#161b23; border-radius:12px; padding:10px; }

/* HIDDEN SECTION */
.hidden { display:none !important; }
</style>
</head>
<body>

<header class="header">
  <div class="logo" onclick="showSection('home')">
    <img src="assets/AngkorPS.png" alt="Logo">
    <span>AngkorPS</span>
  </div>
  <div class="nav">
    <button onclick="toggleNavMenu()"><i class="fas fa-bars"></i> Menu</button>
    <div class="nav-menu" id="navMenu">
      <a href="#" onclick="showSection('home')">Home</a>
      <a href="#" onclick="showSection('host')">Host & Download</a>
      <a href="#" onclick="showSection('discord')">Discord</a>
    </div>
  </div>
</header>

<div class="container">

  <!-- SERVER STATUS & LEADERBOARD (Home) -->
  <div id="homeSection" class="section">
    <div class="card">
      <div class="status-card">
        <h4>Server Status</h4>
        <p id="serverStatus">Checking...</p>
      </div>
      <div class="status-card">
        <h4>Players Online</h4>
        <p id="playersCount">0</p>
      </div>
    </div>

    <!-- ONLINE PLAYERS GRAPH -->
    <div class="card">
      <h3><i class="fas fa-chart-line"></i> Online Players (Live)</h3>
      <canvas id="onlineChart" height="120"></canvas>
    </div>

    <!-- LEADERBOARD -->
    <div class="card leaderboard">
      <h3><i class="fas fa-trophy"></i> Leaderboard</h3>
      <ul id="leaderboardList">
        <li>Loading...</li>
      </ul>
    </div>
  </div>

  <!-- HOST & DOWNLOAD -->
  <div id="hostSection" class="section hidden">
    <div class="card">
      <h3><i class="fas fa-server"></i> Host & Download</h3>
      <div class="btn-grid">
        <button class="btn" onclick="copyHost()">Copy IP</button>
        <button class="btn" onclick="downloadHost()">Download Host</button>
        <button class="btn" onclick="copyPowerTunnel()">PowerTunnel</button>
        <button class="btn" onclick="copyHostGoURL()">Host GO</button>
        <button class="btn" onclick="copyIOS()">iOS Host</button>
      </div>
    </div>
  </div>

  <!-- DISCORD -->
  <div id="discordSection" class="section hidden">
    <div class="card">
      <h3><i class="fab fa-discord"></i> Discord</h3>
      <div class="btn-grid">
        <button class="btn btn-discord" onclick="window.open('https://discord.gg/JrVquN9sgx')">Join Discord</button>
      </div>
    </div>
  </div>

</div>

<footer class="footer">Â© <strong>AngkorPS</strong></footer>
<div id="toast" class="toast"></div>

<script>
// HEADER MENU
function toggleNavMenu(){ document.getElementById("navMenu").classList.toggle("show"); }
document.addEventListener('click', function(e){
  const menu=document.getElementById("navMenu");
  const btn=document.querySelector(".nav button");
  if(!menu.contains(e.target) && !btn.contains(e.target)) menu.classList.remove("show");
});

// SHOW/HIDE SECTIONS
function showSection(section){
  const sections=['home','host','discord'];
  sections.forEach(s=>{
    const el=document.getElementById(s+'Section');
    if(s===section) el.classList.remove('hidden'); else el.classList.add('hidden');
  });
  closeNavMenu();
}
function closeNavMenu(){ document.getElementById("navMenu").classList.remove("show"); }

// Toast helper
function showToast(msg,type="success"){
  const t=document.getElementById("toast");
  t.textContent=msg;
  t.className="toast "+(type==="error"?"error":"");
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),1800);
}

// Host & Download
const HOST_IP_TEXT=`5.39.13.21 growtopia1.com
5.39.13.21 growtopia2.com
5.39.13.21 www.growtopia1.com
5.39.13.21 www.growtopia2.com`;
function copyText(text){ navigator.clipboard.writeText(text).then(()=>showToast("Copied")).catch(()=>showToast("Failed","error")); }
function copyHost(){ copyText(HOST_IP_TEXT); }
function copyPowerTunnel(){ copyText("https://angkorps.site/angkor.txt"); }
function copyHostGoURL(){ copyText("https://angkorps.site/angkor.host"); }
function copyIOS(){ copyText("https://angkorps.site/ios.txt"); }
function downloadHost(){
  const blob=new Blob([HOST_IP_TEXT],{type:"text/plain"});
  const url=URL.createObjectURL(blob);
  const a=document.createElement("a"); a.href=url; a.download="angkor.host"; a.click();
  URL.revokeObjectURL(url); showToast("Downloaded!");
}

/* LIVE ONLINE PLAYERS GRAPH */
const ctx=document.getElementById('onlineChart').getContext('2d');
const onlineChart=new Chart(ctx,{
  type:'line',
  data:{ labels:[], datasets:[{ label:'Players Online', data:[], borderColor:'#10b981', backgroundColor:'rgba(16,185,129,0.2)', fill:true, tension:0, borderWidth:2, pointRadius:3 }]},
  options:{
    responsive:true,
    plugins:{ legend:{ display:false } },
    scales:{ x:{ display:false }, y:{ ticks:{ color:'#e5e5e5', stepSize:1, callback:v=>Math.round(v) }, grid:{ color:'#1f242c' }, beginAtZero:true } }
  }
});
function addOnlineData(count){
  if(onlineChart.data.labels.length>=30){ onlineChart.data.labels.shift(); onlineChart.data.datasets[0].data.shift(); }
  onlineChart.data.labels.push("");
  onlineChart.data.datasets[0].data.push(Math.round(count));
  onlineChart.update();
}

/* SERVER STATUS & LEADERBOARD */
async function updateServer(){
  try{
    const res=await fetch("https://angkorps.site/api/ping");
    const data=await res.json();
    document.getElementById("serverStatus").textContent=data.serverStatus==="online"?"ONLINE":"OFFLINE";
    document.getElementById("serverStatus").style.color=data.serverStatus==="online"?"#10b981":"red";
    document.getElementById("playersCount").textContent=data.onlinePlayersCount??0;
    addOnlineData(data.onlinePlayersCount??0);

    const lb=document.getElementById("leaderboardList");
    lb.innerHTML="";
    if(data.leaderboard && data.leaderboard.length>0){
      data.leaderboard.forEach(entry=>{
        const parts=entry.split(" ");
        const li=document.createElement("li"); li.className="lb-item";
        li.innerHTML=`<span>${parts[0]} ${parts[1]}</span><span class="lb-wl">${parts[2]} ${parts[3]} <img src="assets/world_lock.png" alt="WL"></span>`;
        lb.appendChild(li);
      });
    } else lb.innerHTML="<li>No players found</li>";
  } catch{
    document.getElementById("serverStatus").textContent="OFFLINE";
    document.getElementById("serverStatus").style.color="red";
    document.getElementById("playersCount").textContent=0;
    addOnlineData(0);
    document.getElementById("leaderboardList").innerHTML="<li>No data</li>";
  }
}

updateServer();
setInterval(updateServer,5000);
</script>
</body>
</html>
